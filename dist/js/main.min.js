function init(){"use strict";var e=function(){var e=function(){$(".js-image-fill").imgLiquid()},t=function(){e()},n=function(){var e=$("#main-menu");e.length&&$("body").on("click",".js-menu-trigger",function(t){t.preventDefault(),e.hasClass("on")?e.removeClass("on"):e.addClass("on")})},o=function(){$(".home-page").length||$(".internal-page").addClass("show")},a=function(e,t,n){if(e.length){var o=$("body, html"),a=e.offset().top;"undefined"!=typeof n&&(a-=n),o.on("scroll mousedown wheel DOMMouseScroll mousewheel touchmove",function(){o.stop()}),o.animate({scrollTop:a+"px"},t,function(){o.off("scroll mousedown wheel DOMMouseScroll mousewheel touchmove")})}},i=function(){$(".js-scroll-to").click(function(e){e.preventDefault();var t=$($(this).attr("href"));t.length&&a(t,1200,0)})},s=function(){Modernizr.svg||$("img[src$='.svg']").each(function(){var e=$(this);e.data("fallback").length&&e.attr("src",e.data("fallback"))})},r=function(){t(),n(),s(),i(),o()};return{init:r,animateScrollToElement:a}}(),t=function(){var t=function(){var e=$(".js-parallax");e.length&&!$(".lt-ie9").length&&e.parallax()},n=function(){var e=$(".js-covervid-video");!e.length||e.parent().hasClass("video-loaded")||$(".lt-ie9").length||e.coverVid(1920,1080)},o=function(){i(),a()},a=function(){var e=$(".home-page").find(".js-fade-in-up");e.each(function(){var e=$(this);new Waypoint({element:e,handler:function(t){e.hasClass("show")||e.addClass("show")},offset:"50%"})})},i=function(){new Waypoint({element:$("#banner-panel"),handler:function(e){"up"==e?$("#page-header").removeClass("on"):$("#page-header").addClass("on")},offset:"-100%"})},s=function(e){return $('.js-goto-panel[href="#'+e.attr("id")+'"]')},r=function(){$(".js-goto-panel").click(function(t){t.preventDefault();var n=$(this),o=$($(this).attr("href"));e.animateScrollToElement(o,1e3,0),l($(".js-goto-panel.active")),c(n)});$(window).on("scrollstop",function(){var e=f();if(e){var t=s(e);t.hasClass("active")||(l($(".js-goto-panel.active")),c(t))}})},l=function(e){e.removeClass("active");var t=e.find(".side-nav-circle"),n=e.find(".side-nav-num");n.addClass("num-off"),setTimeout(function(){n.addClass("num-off"),t.removeClass("circle-off")},850)},c=function(e){e.addClass("active");var t=e.find(".side-nav-circle"),n=e.find(".side-nav-num");t.addClass("circle-off"),setTimeout(function(){t.addClass("circle-off"),n.removeClass("num-off")},350)},f=function(){var e=$(".home-page").children("section"),t=$(window).scrollTop(),n=!1;return e.each(function(){var e=$(this),o=d(e);t>=o.top&&t<=o.bottom&&(n=e)}),n},u=function(){var t=$(window).scrollTop();$(window).on("scrollstop",function(){var n=$(window).scrollTop(),o=f();if(o.length&&Modernizr.mq("(min-height: 795px) and (min-width: 1300px)")){var a=d(o),i=500,s=a.bottom-.35*o.height();if(n>=s){var r=o.next();e.animateScrollToElement(r,i)}else{var l=a.top+.35*o.height();l>=n&&e.animateScrollToElement(o,i)}}t=n})},d=function(e){var t=e.offset().top,n=t+e.height();return{top:t,bottom:n}},m=function(){if($(".covervid-wrapper").imagesLoaded(function(){h()}),Modernizr.mq("(min-width: 768px)")){$(".js-covervid-video source").length||$(".js-covervid-video").append('<source src="https://85d137da1e54f786fead-53b266e97c0af9c711d72e69e4af35ea.ssl.cf4.rackcdn.com/looped.mp4" type="video/mp4">');var e=document.getElementsByTagName("video")[0];e.addEventListener("loadeddata",function(){$(".covervid-wrapper").addClass("video-loaded")})}},v=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"FAIL",o=n.split("(")[1].split(")")[0].split(","),a=o[0],i=o[1],s=(o[2],o[3],Math.round(Math.atan2(i,a)*(180/Math.PI)));return s},p=function(){var e,t=$("#value-wheel"),n=1;$(".segment").click(function(o){o.preventDefault(),clearTimeout(e),t.resumeKeyframe();var a=v(document.getElementById("value-wheel")),i=parseInt($(this).data("rotation"));isNaN(i)||($.keyframe.define([{name:"rotate-to-this-segment-"+n,"0%":{transform:"rotate("+a+"deg)"},"100%":{transform:"rotate("+i+"deg)"}}]),t.playKeyframe([{name:"rotate-to-this-segment-"+n,duration:"600ms",timingFunction:"cubic-bezier(0.65, -0.39, 0.32, 1.34)",iterationCount:1}]),n++)}),t.mouseenter(function(){t.pauseKeyframe()}).mouseleave(function(){e=setTimeout(function(){$.keyframe.define([{name:"rotate-wheel-"+n,"0%":{transform:"rotate("+v(document.getElementById("value-wheel"))+"deg)"},"100%":{transform:"rotate("+(v(document.getElementById("value-wheel"))+360)+"deg)"}}]),t.playKeyframe([{name:"rotate-wheel-"+n,duration:"60s",timingFunction:"linear",iterationCount:"infinite"}]),n++},500)})},h=function(){var e=$(".js-accordion-text");e.each(function(){var e=$(this),t=e.attr("style");"undefined"!=typeof t&&$(".banner-title, .banner-title *").removeAttr("style").removeClass("active"),g(e,0,e.find(".js-text").eq(0),!0)})},g=function(e,t,n,o){var a=n.outerWidth(!0)+30,i=t+a;if(e.css("width",i+"px"),setTimeout(function(){n.css("opacity","1")},600),o){var s=n.next();s.length?setTimeout(function(){g(e,i,s,!0)},600):w(e)}},w=function(e){var t=$(".js-has-variations");t.length&&(e.css("overflow","visible"),t.each(function(){var e=$(this).find(".js-text-alt");e.length>1&&setTimeout(function(){var t=e.filter(".active");y(e.eq(1),t)},800)}))},y=function(e,t){setTimeout(function(){t.length&&(t.css({transform:"translateY(-60px)",opacity:"0"}),setTimeout(function(){t.removeClass("active")},500)),e.css({transform:"translateY(0)",opacity:"1"}),setTimeout(function(){e.addClass("active");var t=e.next();t.length?y(e.next(),e):$(".banner-cta").addClass("show")},500)},500)},C=function(){n(),t(),o()},T=function(){m(),C(),p(),u(),r()};return{init:T}}(),n=function(){var t=function(e){e.isotope({itemSelector:".js-iso-element",transitionDuration:"0.8s",layoutMode:"masonry",masonry:{columnWidth:".grid-sizer",isFitWidth:!0},getSortData:{coffees:"[data-coffees] parseInt",commits:"[data-commits] parseInt",cats:"[data-cats] parseInt"}})},n=function(e){e.css("visibility","visible"),setTimeout(function(){var t=0;e.each(function(){var e=$(this);t+=50,setTimeout(function(){e.parent(".person").addClass("loaded")},t)})},100)},o=$(".js-isotope"),a=function(){o.length&&o.imagesLoaded(function(){$(".loader").addClass("off"),n(o.find("img")),t(o)})},i=function(){$(".js-show-bio").click(function(t){t.preventDefault();var n=$(this).parent(".person-wrap");n.hasClass("on")?n.removeClass("on"):($(".person-wrap.on").removeClass("on"),n.addClass("on"),setTimeout(function(){e.animateScrollToElement(n,1e3,100)},300)),$(".js-isotope").isotope("layout")})},s=function(){var e=$(".sort-btn");e.click(function(t){t.preventDefault();var n=$(this);if(n.hasClass("active"))n.removeClass("active"),o.isotope({sortBy:"random"}).isotope("updateSortData").isotope();else{e.removeClass("active"),n.addClass("active");var a=n.data("sort");o.isotope({sortBy:a,sortAscending:!1}).isotope("updateSortData").isotope()}})},r=function(){a(),i(),s()};return{init:r}}();e.init();var o=$("#main-wrap");o.length&&(o.hasClass("home-page")&&t.init(),o.hasClass("people-page")&&n.init())}$(document).ready(function(){init()});